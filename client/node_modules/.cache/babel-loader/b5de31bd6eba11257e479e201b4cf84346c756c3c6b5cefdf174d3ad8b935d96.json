{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BusTable(){const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get(\"http://localhost:3001/bus\");setData(response.data);}catch(err){setError(\"Error fetching data\");console.error(err);}finally{setLoading(false);}};fetchData();},[]);const deleteBus=async busno=>{console.log(\"Attempting to delete bus with busno:\",busno);if(window.confirm(\"Are you sure you want to delete this bus?\")){try{const response=await axios.delete(`http://localhost:3001/bus/${busno}`);console.log('Bus deleted successfully:',response.data);}catch(error){console.error('Error deleting bus:',error);// Handle specific error cases if needed\n}}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});if(!data.length)return/*#__PURE__*/_jsx(\"p\",{children:\"No bus data available.\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bus Details\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"BUS No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bus Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bus Route\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mode (Day/Night)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(bus=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:bus.busno}),/*#__PURE__*/_jsx(\"td\",{children:bus.busname}),/*#__PURE__*/_jsx(\"td\",{children:bus.busroute}),/*#__PURE__*/_jsx(\"td\",{children:bus.time}),/*#__PURE__*/_jsx(\"td\",{children:bus.service}),/*#__PURE__*/_jsx(\"td\",{children:bus.mode}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:`/updatebus`,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",children:\"Update\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger\",onClick:()=>deleteBus(bus.busno),children:\"Delete\"})})]},bus.busno))})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Add Bus:\"}),/*#__PURE__*/_jsx(Link,{to:\"/addbus\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",children:\"Insert\"})})]});}export default BusTable;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsx","_jsx","jsxs","_jsxs","BusTable","data","setData","loading","setLoading","error","setError","fetchData","response","get","err","console","deleteBus","busno","log","window","confirm","delete","children","length","map","bus","busname","busroute","time","service","mode","to","className","onClick"],"sources":["D:/bus booking system/client/src/components/admin/BusData.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction BusTable() {\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    \r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await axios.get(\"http://localhost:3001/bus\");\r\n                setData(response.data);\r\n            } catch (err) {\r\n                setError(\"Error fetching data\");\r\n                console.error(err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const deleteBus = async (busno) => {\r\n        console.log(\"Attempting to delete bus with busno:\", busno);\r\n        if (window.confirm(\"Are you sure you want to delete this bus?\")) {\r\n            try {\r\n    const response = await axios.delete(`http://localhost:3001/bus/${busno}`);\r\n    console.log('Bus deleted successfully:', response.data);\r\n} catch (error) {\r\n    console.error('Error deleting bus:', error);\r\n    // Handle specific error cases if needed\r\n}\r\n\r\n        }\r\n    };\r\n\r\n\r\n    if (loading) return <p>Loading...</p>;\r\n    if (error) return <p>{error}</p>;\r\n    if (!data.length) return <p>No bus data available.</p>;\r\n\r\n    return (\r\n        <div>\r\n            <h3>Bus Details</h3>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>BUS No</th>\r\n                        <th>Bus Name</th>\r\n                        <th>Bus Route</th>\r\n                        <th>Time</th>\r\n                        <th>Service</th>\r\n                        <th>Mode (Day/Night)</th>\r\n                        <th>Edit</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {data.map((bus) => (\r\n                        <tr key={bus.busno}>\r\n                            <td>{bus.busno}</td>\r\n                            <td>{bus.busname}</td>\r\n                            <td>{bus.busroute}</td>\r\n                            <td>{bus.time}</td>\r\n                            <td>{bus.service}</td>\r\n                            <td>{bus.mode}</td>\r\n                            <td>\r\n                                <Link to={`/updatebus`}>\r\n                                    <button className='btn btn-outline-primary'>Update</button>\r\n                                </Link>\r\n                            </td>\r\n                            <td>\r\n                                <button\r\n                                    className='btn btn-outline-danger'\r\n                                    onClick={() => deleteBus(bus.busno)}\r\n                                >\r\n                                    Delete\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            <h4>Add Bus:</h4>\r\n            <Link to='/addbus'>\r\n                <button className='btn btn-outline-success'>Insert</button>\r\n            </Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BusTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}