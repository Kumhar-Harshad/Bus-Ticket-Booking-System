{"ast":null,"code":"import{useState,useEffect}from'react';import'../components/css/singup.css';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmpass,setConfirmpass]=useState('');const[adminCode,setAdminCode]=useState('');const[role,setRole]=useState('');const[show,setShow]=useState(false);const[errors,setErrors]=useState({});const navigate=useNavigate();useEffect(()=>{setShow(role===\"ADMIN\");},[role]);const validateForm=()=>{const newErrors={};const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!username||username.length<3){newErrors.username='Username must be at least 3 characters long.';}if(!email||!emailRegex.test(email)){newErrors.email='Please enter a valid email address.';}if(!password||password.length<6){newErrors.password='Password must be at least 6 characters long.';}if(password!==confirmpass){newErrors.confirmpass='Passwords do not match.';}if(role===\"ADMIN\"&&adminCode!==\"HARSHADBUS\"){newErrors.adminCode='Invalid Admin code.';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=e=>{e.preventDefault();// Prevent default form submission\nif(!validateForm()){return;// Stop if validation fails\n}handleSubmitDone();};const handleSubmitDone=()=>{axios.post('http://localhost:3001/signup',{username,email,password,role}).then(result=>{console.log(result);navigate('/login');}).catch(err=>console.log(err));};return/*#__PURE__*/_jsx(\"div\",{className:\"registration\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"registration-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[show&&/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"AdminCode\",placeholder:\"Admin Code\",onChange:e=>setAdminCode(e.target.value),required:true}),errors.adminCode&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.adminCode})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",required:true,onChange:e=>setUsername(e.target.value)}),errors.username&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",required:true,onChange:e=>setEmail(e.target.value)}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",required:true,onChange:e=>setPassword(e.target.value)}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmpass\",placeholder:\"Confirm Password\",required:true,onChange:e=>setConfirmpass(e.target.value)}),errors.confirmpass&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.confirmpass})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setRole(e.target.value),className:\"allcity mb-4 px-4 py-2 border rounded w-full text-black\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Your Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USER\",children:\"USER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ADMIN\",children:\"ADMIN\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn bb1\",children:\"Register\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Login here\"})]})]})})});}export default Signup;","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Signup","username","setUsername","email","setEmail","password","setPassword","confirmpass","setConfirmpass","adminCode","setAdminCode","role","setRole","show","setShow","errors","setErrors","navigate","validateForm","newErrors","emailRegex","length","test","Object","keys","handleSubmit","e","preventDefault","handleSubmitDone","post","then","result","console","log","catch","err","className","children","onSubmit","type","name","placeholder","onChange","target","value","required","href"],"sources":["D:/bus booking system/client/src/components/SingUp.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport '../components/css/singup.css';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Signup() {\r\n    const [username, setUsername] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmpass, setConfirmpass] = useState('');\r\n    const [adminCode, setAdminCode] = useState('');\r\n    const [role, setRole] = useState('');\r\n    const [show, setShow] = useState(false);\r\n    const [errors, setErrors] = useState({});\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        setShow(role === \"ADMIN\");\r\n    }, [role]);\r\n\r\n    const validateForm = () => {\r\n        const newErrors = {};\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n        if (!username || username.length < 3) {\r\n            newErrors.username = 'Username must be at least 3 characters long.';\r\n        }\r\n        if (!email || !emailRegex.test(email)) {\r\n            newErrors.email = 'Please enter a valid email address.';\r\n        }\r\n        if (!password || password.length < 6) {\r\n            newErrors.password = 'Password must be at least 6 characters long.';\r\n        }\r\n        if (password !== confirmpass) {\r\n            newErrors.confirmpass = 'Passwords do not match.';\r\n        }\r\n        if (role === \"ADMIN\" && adminCode !== \"HARSHADBUS\") {\r\n            newErrors.adminCode = 'Invalid Admin code.';\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n    \r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault(); // Prevent default form submission\r\n\r\n        if (!validateForm()) {\r\n            return; // Stop if validation fails\r\n        }\r\n\r\n        handleSubmitDone();\r\n    };\r\n\r\n    const handleSubmitDone = () => {\r\n        axios.post('http://localhost:3001/signup', { username, email, password, role })\r\n            .then(result => {\r\n                console.log(result);\r\n                navigate('/login');\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    return (\r\n        <div className='registration'>\r\n            <div className=\"container\">\r\n                <div className=\"registration-box\">\r\n                    <h2>Register</h2>\r\n                    <form onSubmit={handleSubmit}>\r\n                        {show && (\r\n                            <div className=\"textbox\">\r\n                                <input \r\n                                    type=\"text\" \r\n                                    name=\"AdminCode\" \r\n                                    placeholder=\"Admin Code\" \r\n                                    onChange={(e) => setAdminCode(e.target.value)} \r\n                                    required \r\n                                />\r\n                                {errors.adminCode && <p className=\"error\">{errors.adminCode}</p>}\r\n                            </div>\r\n                        )}\r\n                        <div className=\"textbox\">\r\n                            <input \r\n                                type=\"text\" \r\n                                name=\"username\" \r\n                                placeholder=\"Username\" \r\n                                required \r\n                                onChange={(e) => setUsername(e.target.value)} \r\n                            />\r\n                            {errors.username && <p className=\"error\">{errors.username}</p>}\r\n                        </div>\r\n                        <div className=\"textbox\">\r\n                            <input \r\n                                type=\"email\" \r\n                                name='email' \r\n                                placeholder=\"Email\" \r\n                                required \r\n                                onChange={(e) => setEmail(e.target.value)} \r\n                            />\r\n                            {errors.email && <p className=\"error\">{errors.email}</p>}\r\n                        </div>\r\n                        <div className=\"textbox\">\r\n                            <input \r\n                                type=\"password\" \r\n                                name='password' \r\n                                placeholder=\"Password\" \r\n                                required \r\n                                onChange={(e) => setPassword(e.target.value)} \r\n                            />\r\n                            {errors.password && <p className=\"error\">{errors.password}</p>}\r\n                        </div>\r\n                        <div className=\"textbox\">\r\n                            <input \r\n                                type=\"password\" \r\n                                name='confirmpass' \r\n                                placeholder=\"Confirm Password\" \r\n                                required \r\n                                onChange={(e) => setConfirmpass(e.target.value)} \r\n                            />\r\n                            {errors.confirmpass && <p className=\"error\">{errors.confirmpass}</p>}\r\n                        </div>\r\n                        <select \r\n                            onChange={(e) => setRole(e.target.value)} \r\n                            className=\"allcity mb-4 px-4 py-2 border rounded w-full text-black\"\r\n                            required\r\n                        >\r\n                            <option value=\"\">Select Your Role</option>\r\n                            <option value=\"USER\">USER</option>\r\n                            <option value=\"ADMIN\">ADMIN</option>\r\n                        </select>\r\n                        <button type=\"submit\" className=\"btn bb1\">Register</button>\r\n                    </form>\r\n                    <p>Already have an account? <a href='/login'>Login here</a></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Signup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}