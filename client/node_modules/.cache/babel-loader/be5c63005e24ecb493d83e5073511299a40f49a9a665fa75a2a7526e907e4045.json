{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./css/searchticket.css';import Table from'react-bootstrap/Table';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SearchTicket(){const[pnr,setPnr]=useState(\"\");const[passengers,setPassengers]=useState([]);const[error,setError]=useState(null);const storedBus=JSON.parse(localStorage.getItem('selectedBus'));// Function to handle form submission\nconst handleSubmit=e=>{e.preventDefault();// Prevent the default form submission behavior\naxios.post('http://localhost:3001/pdetails',{pnr}).then(response=>{setPassengers(response.data);// Update state with fetched data\nsetError(null);// Clear any previous error\n}).catch(err=>{setError('Error fetching details');console.error(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-ticket col-md-12 col-sm-12 col-lg-12\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"rehead text-center\",children:\"TICKET SEARCH OF YOUR JOURNEY\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Verify your Details and SEARCH for your Journey Tickets\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"pnr\",name:\"pnr\",value:pnr,onChange:e=>setPnr(e.target.value),placeholder:\"PNR NUMBER ENTER\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-danger search\",children:\"Search\"})]})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),\" \",/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"PNR Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bus No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bus Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"From\"}),/*#__PURE__*/_jsx(\"th\",{children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Seat NO\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:passengers.length>0?passengers.map(passenger=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:passenger.id}),/*#__PURE__*/_jsx(\"td\",{children:storedBus.busno}),/*#__PURE__*/_jsx(\"td\",{children:storedBus.busname}),/*#__PURE__*/_jsx(\"td\",{children:storedBus.service}),/*#__PURE__*/_jsx(\"td\",{children:storedBus.mode}),/*#__PURE__*/_jsx(\"td\",{children:passenger.name}),/*#__PURE__*/_jsx(\"td\",{children:passenger.age}),/*#__PURE__*/_jsx(\"td\",{children:passenger.gender}),/*#__PURE__*/_jsx(\"td\",{children:passenger.number}),/*#__PURE__*/_jsx(\"td\",{children:passenger.from}),/*#__PURE__*/_jsx(\"td\",{children:passenger.to}),/*#__PURE__*/_jsx(\"td\",{children:storedBus.time}),/*#__PURE__*/_jsx(\"td\",{children:passenger.date}),/*#__PURE__*/_jsx(\"td\",{children:passenger.seat}),/*#__PURE__*/_jsx(\"td\",{children:localStorage.totalPrice})]},passenger.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"15\",className:\"text-center\",children:\"No data available\"})})})]})})]});}export default SearchTicket;","map":{"version":3,"names":["React","useState","axios","Table","jsx","_jsx","jsxs","_jsxs","SearchTicket","pnr","setPnr","passengers","setPassengers","error","setError","storedBus","JSON","parse","localStorage","getItem","handleSubmit","e","preventDefault","post","then","response","data","catch","err","console","className","children","onSubmit","type","id","name","value","onChange","target","placeholder","striped","bordered","hover","length","map","passenger","busno","busname","service","mode","age","gender","number","from","to","time","date","seat","totalPrice","colSpan"],"sources":["D:/bus booking system/client/src/components/SearchTicket.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport './css/searchticket.css'\r\nimport Table from 'react-bootstrap/Table';\r\n\r\nfunction SearchTicket() {\r\n    const [pnr, setPnr] = useState(\"\");\r\n    const [passengers, setPassengers] = useState([]);\r\n    const [error, setError] = useState(null);\r\n    const storedBus = JSON.parse(localStorage.getItem('selectedBus'));\r\n\r\n    \r\n\r\n    // Function to handle form submission\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault(); // Prevent the default form submission behavior\r\n\r\n        axios.post('http://localhost:3001/pdetails', { pnr })\r\n            .then((response) => {\r\n                setPassengers(response.data);// Update state with fetched data\r\n                setError(null); // Clear any previous error\r\n            })\r\n            .catch((err) => {\r\n                setError('Error fetching details');\r\n                console.error(err);\r\n            });\r\n    };\r\n   \r\n\r\n    return (\r\n        <div className=\"search-ticket col-md-12 col-sm-12 col-lg-12\">\r\n        <form onSubmit={handleSubmit}>\r\n            <h3 className=\"rehead text-center\">TICKET SEARCH OF YOUR JOURNEY</h3>\r\n            <p className=\"text-center\">Verify your Details and SEARCH for your Journey Tickets</p>\r\n\r\n            <div>\r\n                <input\r\n                    type='text'\r\n                    id='pnr'\r\n                    name='pnr'\r\n                    value={pnr}\r\n                    onChange={(e) => setPnr(e.target.value)}\r\n                    placeholder='PNR NUMBER ENTER'\r\n                />\r\n                <button type='submit' className='btn btn-outline-danger search'>Search</button>\r\n            </div>\r\n        </form>\r\n\r\n        {error && <p className=\"error\">{error}</p>} {/* Display error message if any */}\r\n\r\n        <div>\r\n        <Table striped bordered hover>\r\n                <thead >\r\n                    <tr >\r\n                        <th >PNR Number</th>\r\n                        <th>Bus No</th>\r\n                        <th>Bus Name</th>\r\n                        <th>Service</th>\r\n                        <th>Mode</th>\r\n                        <th>Name</th>\r\n                        <th>Age</th>\r\n                        <th>Gender</th>\r\n                        <th>Number</th>\r\n                        <th>From</th>\r\n                        <th>To</th>\r\n                        <th>Time</th>\r\n                        <th>Date</th>\r\n                        <th>Seat NO</th>\r\n                        <th>Price</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody >\r\n                    {passengers.length > 0 ? (\r\n                        passengers.map((passenger) => (\r\n                            <tr key={passenger.id}>\r\n                                <td>{passenger.id}</td>\r\n                                <td>{storedBus.busno}</td>\r\n                                <td>{storedBus.busname}</td>\r\n                                <td>{storedBus.service}</td>\r\n                                <td>{storedBus.mode}</td>\r\n                                <td>{passenger.name}</td>\r\n                                <td>{passenger.age}</td>\r\n                                <td>{passenger.gender}</td>\r\n                                <td>{passenger.number}</td>\r\n                                <td>{passenger.from}</td>\r\n                                <td>{passenger.to}</td>\r\n                                <td>{storedBus.time}</td>\r\n                                <td>{passenger.date}</td>\r\n                                <td>{passenger.seat}</td>\r\n                                <td>{localStorage.totalPrice    }</td>\r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"15\" className='text-center'>No data available</td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </Table>\r\n        </div>\r\n    </div>\r\n);\r\n}\r\nexport default SearchTicket;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}